# Компонент FileUpload

Компонент для загрузки одного или нескольких файлов с поддержкой валидации, drag & drop и кастомным стилем.

## Характеристики

| Параметр | Значение |
|----------|----------|
| **Тип компонента** | Поле загрузки файлов |
| **Иммутабельность** | Да (readonly) |
| **Рендеринг** | SSR (серверный) |
| **Типизация** | Strict PHP 8.2+ |
| **CSS префикс** | `wallkit-fileupload-` |
| **Зависимости** | Base, WithHelpers, WithStrictHelpers |

## Свойства компонента

| Свойство | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| `name` | `string` | — | Имя поля (обязательно) |
| `label` | `string` | — | Подпись поля (обязательно) |
| `placeholder` | `?string` | `null` | Текст-подсказка |
| `required` | `bool` | `false` | Обязательное поле |
| `disabled` | `bool` | `false` | Отключенное состояние |
| `multiple` | `bool` | `false` | Разрешён множественный выбор |
| `accept` | `?string` | `null` | Разрешённые MIME-типы или расширения |
| `maxSize` | `?int` | `null` | Максимальный размер файла в байтах |
| `maxFiles` | `?int` | `null` | Максимальное количество файлов (при multiple) |
| `maxWidth` | `?int` | `null` | Максимальная ширина изображения (пиксели) |
| `maxHeight` | `?int` | `null` | Максимальная высота изображения (пиксели) |
| `id` | `?string` | `null` | HTML ID (автогенерация) |
| `helpText` | `?string` | `null` | Подсказка под полем |
| `error` | `?string` | `null` | Сообщение об ошибке |

## Использование

### Базовое использование
```php
use OlegV\WallKit\Form\FileUpload\FileUpload;

$upload = new FileUpload(
    name: 'avatar',
    label: 'Загрузите аватар',
    accept: 'image/*'
);
echo $upload;
```

### Загрузка нескольких файлов с ограничениями
```php
$upload = new FileUpload(
    name: 'attachments',
    label: 'Прикрепите документы',
    multiple: true,
    accept: '.pdf,.doc,.docx',
    maxFiles: 5,
    maxSize: 10 * 1024 * 1024 // 10MB
);
```

### Загрузка изображений с ограничениями
```php
$upload = new FileUpload(
    name: 'gallery',
    label: 'Галерея изображений',
    multiple: true,
    accept: 'image/*',
    maxSize: 5 * 1024 * 1024,
    maxWidth: 1920,
    maxHeight: 1080
);
```

## Стилизация

### CSS-классы
| Класс | Назначение |
|-------|------------|
| `.wallkit-fileupload` | Контейнер компонента |
| `.wallkit-fileupload__label` | Подпись поля |
| `.wallkit-fileupload__required` | Обозначение обязательного поля |
| `.wallkit-fileupload__wrapper` | Обёртка поля ввода |
| `.wallkit-fileupload__field` | Поле ввода файлов |
| `.wallkit-fileupload__placeholder` | Текст-плейсхолдер |
| `.wallkit-fileupload__help` | Вспомогательный текст |
| `.wallkit-fileupload__error` | Сообщение об ошибке |

### CSS-переменные
Компонент использует переменные из базовой темы:
- `--wk-color-*` — цвета
- `--wk-spacing-*` — отступы
- `--wk-font-*` — типографика
- `--wk-border-radius-*` — радиусы скругления
- `--wk-shadow-*` — тени
- `--wk-transition-*` — анимации

## JavaScript-функциональность

Компонент включает расширенный JavaScript-функционал:

### Валидация
- **Размер файлов** — проверка максимального размера
- **Количество файлов** — ограничение при множественном выборе
- **Размеры изображений** — проверка ширины и высоты
- **Типы файлов** — фильтрация по MIME-типам

### Drag & Drop
- Поддержка перетаскивания файлов в область компонента
- Визуальная обратная связь при перетаскивании
- Автоматическая валидация перетащенных файлов

### Дополнительные возможности
- Отображение выбранных файлов в плейсхолдере
- Прогрессивное улучшение (работает без JavaScript)
- Подробные сообщения об ошибках

## Совместимость

| Система | Статус | Примечания |
|---------|--------|------------|
| **PHP** | 8.2+ | Strict типизация, readonly классы |
| **HTML** | 5+ | Семантическая разметка |
| **CSS** | 3+ | CSS-переменные, Flexbox |
| **JavaScript** | ES6+ | Прогрессивное улучшение |

## Data-атрибуты для JS-валидации

Компонент передаёт параметры валидации через data-атрибуты:
- `data-max-size` — максимальный размер файла
- `data-max-files` — максимальное количество файлов
- `data-max-width` — максимальная ширина изображения
- `data-max-height` — максимальная высота изображения

## Ссылки
- [Базовый класс Base](../Base/README.md)
- [Документация по формам](../../Form/Form/README.md)
- [Компонент Input](../Input/README.md)

---

**Версия:** 1.0.0  
**Автор:** OlegV  
**Лицензия:** MIT